{% include "header.html.twig" %}

{% block title %}Cart manager
{% endblock %}
{% block stylesheets %}
<style>
  .button {
	margin-left:29.5rem;
	margin-bottom:20px;
    display: inline-block;
    padding: 10px 20px;
    background-color: black;
    color: white;
    text-decoration: none;
    border-radius: 5px;
    font-weight: bold;
  }

  .button:hover {
    background-color: gray;
    color: black;
  }
</style>
{% endblock %}
{% block body %}
	<div class="container" style="margin-top: 80px;margin-bottom:80px">
		<a href="{{path('app_product')}}" class="button">Add another product</a>
		<table class="table">
			<tr>
				<th>STT</th>
				<th>Product</th>
				<th>Price</th>
				<th>Quantity</th>
				<th>Total</th>
				<th>Action</th>
			</tr>
			{% for item in cart_manager.items%}
				<tr>
					<form action="{{path('app_cart_update')}}" method="POST">
						<td>{{loop.index}}</td>
						<td>
							{{item.product.name}}</td>
						<td style="text-align:right">{{item.product.price|number_format(2, '.', ',')}}$</td>
						<td class="text-right" >
                            <input type='hidden' value='{{item.product.id}}' name='product_id'/>
							<input type='number' onchange="this.form.submit()" value='{{item.quantity}}' min="1" name='qty'/>
						</td>
						<td>{{item.amount|number_format(2, '.', ',')}}$</td>
						<td>
							<a href="{{path('app_cart_remove',{'product_id':item.product.id})}}">Remove</a>
						</td>
					</form>
				</tr>
			{% endfor %}
			<tr>
				<td colspans="5">SUM</td>
				<td>{{cart_manager.amount|number_format(2, '.', ',')}}$</td>
			</tr>
		</table>
		<a href="{{path('app_order')}}" class="button" style="margin-left:32rem">Check out</a>
	</div>
{% endblock %}
{% include "footer.html.twig" %}
{% block javascripts %}
{% endblock %}
